<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>deepClone.spec.js - 函数工具库</title>

    <meta name="description" content="日常 JavaScript  函数工具库，方便查看" />

        <meta name="keywords" content="javaScript, utils, jsdoc" />
        <meta name="keyword" content="javaScript, utils, jsdoc" />



    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >

    <input type="text" id="nav-search" placeholder="Search" />

    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/have-not-BUG/js-utils" class="menu-item" id="website_link" >GitHub</a></h2><h3>Global</h3><ul><li><a href="global.html#arrayEqual">arrayEqual</a></li><li><a href="global.html#browserInfo">browserInfo</a></li><li><a href="global.html#byteLength">byteLength</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#deepClone">deepClone</a></li><li><a href="global.html#digitUppercase">digitUppercase</a></li><li><a href="global.html#floatObj">floatObj</a></li><li><a href="global.html#formatCurrency">formatCurrency</a></li><li><a href="global.html#formatNumberZero">formatNumberZero</a></li><li><a href="global.html#formatTime">formatTime</a></li><li><a href="global.html#getDaysInOneMonth">getDaysInOneMonth</a></li><li><a href="global.html#getNowDate">getNowDate</a></li><li><a href="global.html#getObjVal">getObjVal</a></li><li><a href="global.html#getRemovedQueryStringInUrl">getRemovedQueryStringInUrl</a></li><li><a href="global.html#getSearchParam">getSearchParam</a></li><li><a href="global.html#isInteger">isInteger</a></li><li><a href="global.html#isWechatBrowser">isWechatBrowser</a></li><li><a href="global.html#lotteryRandom">lotteryRandom</a></li><li><a href="global.html#paramToObj">paramToObj</a></li><li><a href="global.html#scrollAnimation">scrollAnimation</a></li><li><a href="global.html#sequenceParam">sequenceParam</a></li><li><a href="global.html#thousandthPlace">thousandthPlace</a></li><li><a href="global.html#throttle">throttle</a></li><li><a href="global.html#toFixed">toFixed</a></li></ul>
</nav>

<div id="main">

    <h1 class="page-title">deepClone.spec.js</h1>







    <section>
        <article>
            <pre class="prettyprint source linenums"><code>function judgeType(obj) {
    // tostring会返回对应不同的标签的构造函数
    const toString = Object.prototype.toString;
    const map = {
        '[object Boolean]': 'boolean',
        '[object Number]': 'number',
        '[object String]': 'string',
        '[object Function]': 'function',
        '[object Array]': 'array',
        '[object Date]': 'date',
        '[object RegExp]': 'regExp',
        '[object Undefined]': 'undefined',
        '[object Null]': 'null',
        '[object Object]': 'object',
    };
    const Element=Element?Element:function Element () {

    }
    if (obj instanceof Element) {
        return 'element';
    }
    return map[toString.call(obj)];
}

/**
 * 深拷贝数据
 * @param data  {{}|*} 待拷贝的数据
 * @return {{}|*} 拷贝后的新数据
 * @example const originData=[{name:'lc',age:18},[1,2,3]]
 const clonedData=deepClone(originData)
 clonedData[0].age=28
 clonedData[1]=[9,9,6]
 console.log("clonedData",clonedData)
 console.log('originData',originData)
 //  clonedData [ { name: 'lc', age: 28 }, [ 9, 9, 6 ] ]
 //  originData [ { name: 'lc', age: 18 }, [ 1, 2, 3 ] ]
 */

function deepClone(data) {
    const type = judgeType(data);
    let obj;
    if (type === 'array') {
        obj = [];
    } else if (type === 'object') {
        obj = {};
    } else {
        // 不再具有下一层次
        return data;
    }
    if (type === 'array') {
        // eslint-disable-next-line
        for (let i = 0, len = data.length; i &lt; len; i++) {
            obj.push(deepClone(data[i]));
        }
    } else if (type === 'object') {
        // 对原型上的方法也拷贝了....
        // eslint-disable-next-line
        for (const key in data) {
            obj[key] = deepClone(data[key]);
        }
    }
    return obj;
}



export default deepClone
</code></pre>
        </article>
    </section>






</div>

<br class="clear">

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


<script type="module">
    // 一、导入全部
    import  * as jsUtilsLc  from './src/index.js'
    window.jsUtilsLc=jsUtilsLc
    console.log('如果想在控制台测试方法，可以在jsUtilsLc上找你想测试的方法',jsUtilsLc)
</script>
</body>
</html>
